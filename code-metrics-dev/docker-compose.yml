version: '3'
services:
  prometheus:
    image: prom/prometheus
    volumes:
     - ./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml
    command: "--config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/prometheus"
    ports:
      - 9090:9090
    links:
      - grafana
      
  
  grafana:
    image: grafana/grafana
    ports:
      - 3000:3000
    links:
      - prometheus  
    depends_on:
      - prometheus  

  dynamodb:
    image: amazon/dynamodb-local
    ports:
      - 8000:8000


#  code-metrics:
#    build: ../code-metrics-api/.
#    ports:
#       - 8080:8080
#    depends_on:
#      - dynamodb 
#     links:
#        - prometheus
#        - dynamodb 


